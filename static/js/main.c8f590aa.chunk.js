(this["webpackJsonpreact-danger-noodle"]=this["webpackJsonpreact-danger-noodle"]||[]).push([[0],{29:function(e,n,t){e.exports=t(45)},39:function(e,n,t){},42:function(e,n,t){},43:function(e,n,t){},44:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r,a=t(1),c=t.n(a),o=t(13),u=t(12),i=(t(39),t(7)),s=t(25),l=(t(40),t(26)),p=t.n(l),f=t(28),d=t(6),b=Symbol("game/GAME_RESET"),m=Symbol("game/TIME_TICKED"),v=function(e){var n=e.key;return function(e,t){return function(e){return["w","s","a","d","r"].some((function(n){return n===e}))}(n)&&!t().game.running?e((function(e){return e({type:b})})):null}},y=0,h=function(e){return function(n){return y+e>100?n({type:m})&&(y=0):y+=e}},E=t(3),x=t.n(E),O=t(5),g=t(11),k={EAST:Symbol("east"),WEST:Symbol("west"),NORTH:Symbol("north"),SOUTH:Symbol("south")},j={WALL:Symbol("wallTile"),EMPTY:Symbol("emptyTile"),SNAKE_DEAD:Symbol("snakeDead"),SNAKE_HEAD:Symbol("snakeHead"),SNAKE_NECK:Symbol("snakeNeck"),SNAKE_BODY:Symbol("snakeBody"),SNAKE_TAIL:Symbol("snakeTail"),APPLE:Symbol("apple")},w=k.EAST,S=k.WEST,A=k.NORTH,D=k.SOUTH,N=j.WALL,L=j.EMPTY,C=j.SNAKE_BODY,T=j.SNAKE_DEAD,P=j.APPLE,_=function(e,n,t,r){return e[n][t].tile=r,e},K=function(e){return{tile:e}},M=function(e,n){return Object(g.a)(Array(e).keys()).map((function(t){return K(0===t||t===e-1?N:n)}))},W=[j.SNAKE_HEAD,j.SNAKE_NECK,C,j.SNAKE_TAIL],H=(r=[T,C,T]).concat.apply(r,W),R=function(e,n,t){return n.reduce((function(e,r,a){var c=r.x,o=r.y;return _(e,c,o,function(e,n,t){return n?W[e%W.length]:H[e%H.length]}(a,t,n.length))}),e)},U=function(e,n){var t,r=e.boardSize,a=e.snake,c=e.apples;return function(e,n){return n.reduce((function(e,n){var t=n.x,r=n.y;return _(e,t,r,P)}),e)}(R((t=r,Object(g.a)(Array(t).keys()).map((function(e){return M(t,0===e||e===t-1?N:L)}))),a,n),c)},I=function(e,n){var t=e.x,r=e.y;return{x:t+(n===D?1:n===A?-1:0),y:r+(n===w?1:n===S?-1:0)}},B=function(e,n){var t=n.x,r=n.y;return e.some((function(e){return e.x===t&&e.y===r}))},z=x.a.mark(te),G=x.a.mark(re),Y=x.a.mark(ae),F=x.a.mark(ce),V=x.a.mark(oe),J=x.a.mark(ue),Z=x.a.mark(ie),q=x.a.mark(se),Q=x.a.mark(le),$=x.a.mark(pe),X=Symbol("gameLoop/PLAYER_MOVED"),ee=Symbol("gameLoop/APPLE_EATEN"),ne=Symbol("gameLoop/SNAKE_DIED");function te(e){var n,t;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.x,t=e.y,r.next=3,Object(O.d)({type:ne,x:n,y:t});case 3:case"end":return r.stop()}}),z)}function re(e){var n,t;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.x,t=e.y,r.next=3,Object(O.d)({type:ee,x:n,y:t});case 3:case"end":return r.stop()}}),G)}function ae(e){var n,t,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.x,t=e.y,r=e.length,a.next=3,Object(O.d)({type:X,x:n,y:t,length:r});case 3:case"end":return a.stop()}}),Y)}function ce(){var e,n,t;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(O.f)((function(e){return{snake:e.board.snake}}));case 2:return e=r.sent,n=e.snake,t=n[0],r.abrupt("return",{currentLocation:t});case 6:case"end":return r.stop()}}),F)}function oe(){var e,n,t,r;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(O.f)((function(e){return{snake:e.board.snake,playerDirection:e.player.nextDirection}}));case 2:return e=a.sent,n=e.snake,t=e.playerDirection,r=n[0],a.abrupt("return",I(r,t));case 7:case"end":return a.stop()}}),V)}function ue(e){var n,t,r,a,c;return x.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.x,t=e.y,o.next=3,Object(O.f)((function(e){return{boardSize:e.board.boardSize}}));case 3:return r=o.sent,a=r.boardSize,c=a-1,o.abrupt("return",0===n||n===c||0===t||t===c);case 7:case"end":return o.stop()}}),J)}function ie(e){var n,t,r,a;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.x,t=e.y,c.next=3,Object(O.f)((function(e){return{snake:e.board.snake}}));case 3:return r=c.sent,a=r.snake,c.abrupt("return",a.some((function(e){return e.x===n&&e.y===t})));case 6:case"end":return c.stop()}}),Z)}function se(e){var n,t,r,a;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.x,t=e.y,c.next=3,Object(O.f)((function(e){return{apples:e.board.apples}}));case 3:return r=c.sent,a=r.apples,c.abrupt("return",B(a,{x:n,y:t}));case 6:case"end":return c.stop()}}),q)}function le(){var e,n,t,r,a,c;return x.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ce();case 2:return e=o.sent,n=e.currentLocation,o.next=6,oe();case 6:return t=o.sent,o.next=9,ue(t);case 9:return r=o.sent,o.next=12,ie(t);case 12:return a=o.sent,o.next=15,se(t);case 15:if(c=o.sent,!r&&!a){o.next=21;break}return o.next=19,te(n);case 19:o.next=26;break;case 21:if(!c){o.next=24;break}return o.next=24,re(t);case 24:return o.next=26,ae(Object(d.a)({},t));case 26:case"end":return o.stop()}}),Q)}function pe(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.i)(m,le);case 2:case"end":return e.stop()}}),$)}var fe=pe,de=x.a.mark(ye),be=x.a.mark(he),me=x.a.mark(Ee),ve=Symbol("gameLoop/GAME_OVER");function ye(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)({type:ve});case 2:case"end":return e.stop()}}),de)}function he(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.b)(O.c,20);case 2:return e.next=4,ye();case 4:case"end":return e.stop()}}),be)}function Ee(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)([Object(O.h)(ne,he)]);case 2:case"end":return e.stop()}}),me)}var xe=Ee,Oe={alive:!1,running:!1},ge=x.a.mark(De),ke=x.a.mark(Ne),je=x.a.mark(Le),we=x.a.mark(Ce),Se=x.a.mark(Te),Ae=Symbol("apples/ADDED_APPLE");function De(e){var n,t;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.x,t=e.y,r.next=3,Object(O.d)({type:Ae,x:n,y:t});case 3:case"end":return r.stop()}}),ge)}function Ne(){var e,n,t,r,a;return x.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(O.f)((function(e){return{boardSize:e.board.boardSize,snake:e.board.snake}}));case 2:return e=c.sent,n=e.snake,t=e.boardSize,r=[],(a=Object(g.a)(Array(t-2).keys())).forEach((function(e){a.forEach((function(t){var a={x:e+1,y:t+1};n.some((function(e){return e.x===a.x&&e.y===a.y}))||r.push(a)}))})),c.abrupt("return",r);case 9:case"end":return c.stop()}}),ke)}function Le(){var e,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne();case 2:return e=t.sent,r=e.length-1,n=Math.floor(Math.random()*Math.floor(r)),t.abrupt("return",e[n]);case 5:case"end":return t.stop()}var r}),je)}function Ce(){var e,n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.e)({dead:Object(O.g)(ne),timer:Object(O.b)(O.c,1e3)});case 2:if(e=t.sent,e.dead){t.next=10;break}return t.next=7,Le();case 7:return n=t.sent,t.next=10,De(n);case 10:case"end":return t.stop()}}),we)}function Te(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)([Object(O.h)(ee,Ce),Object(O.h)(b,Ce)]);case 2:case"end":return e.stop()}}),Se)}var Pe,_e=Te,Ke=function(e,n){if(e.length>n){var t=[].concat(e);return t.pop(),t}return e},Me={boardSize:32,snake:[{x:15,y:15}],applesEaten:0,apples:[]},We=function(e){return 4*e+5},He=t(9),Re=k.EAST,Ue=k.WEST,Ie=k.NORTH,Be=k.SOUTH,ze=Symbol("game/PLAYER_CHANGED_DIRECTION"),Ge={w:Ie,s:Be,a:Ue,d:Re},Ye=(Pe={},Object(He.a)(Pe,Be,Ie),Object(He.a)(Pe,Ie,Be),Object(He.a)(Pe,Re,Ue),Object(He.a)(Pe,Ue,Re),Pe),Fe=function(e){var n=e.key;return function(e,t){return function(e){return Object.prototype.hasOwnProperty.call(Ge,e)}(n)&&function(e,n){return n.player.currentDirection!==Ge[e]}(n,t())&&function(e,n){return n.player.currentDirection!==Ye[Ge[e]]}(n,t())?e({type:ze,direction:Ge[n]}):null}},Ve=k.NORTH,Je={currentDirection:null,nextDirection:Ve},Ze=Object(i.combineReducers)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ne:return Object(d.a)(Object(d.a)({},e),{},{alive:!1});case ve:return Object(d.a)(Object(d.a)({},e),{},{running:!1});case b:return Object(d.a)(Object(d.a)({},Oe),{},{alive:!0,running:!0});default:return e}},board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case b:return Me;case X:var t=e.snake,r=e.applesEaten,a=n.x,c=n.y,o=We(r),u=[{x:a,y:c}].concat(Object(g.a)(t)),i=Ke(u,o);return Object(d.a)(Object(d.a)({},e),{},{snake:i});case Ae:var s=e.apples,l=n.x,p=n.y;return Object(d.a)(Object(d.a)({},e),{},{apples:[].concat(Object(g.a)(s),[{x:l,y:p}])});case ee:var f=e.apples,m=e.applesEaten,v=n.x,y=n.y;return Object(d.a)(Object(d.a)({},e),{},{apples:f.filter((function(e){return!(e.x===v&&e.y===y)})),applesEaten:m+1});default:return e}},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case X:return Object(d.a)(Object(d.a)({},e),{},{currentDirection:e.nextDirection});case ze:return Object(d.a)(Object(d.a)({},e),{},{nextDirection:n.direction});case ve:return Je;case b:return Object(d.a)(Object(d.a)({},Je),{},{nextDirection:e.nextDirection||Ve});default:return e}}}),qe=Object(f.a)(),Qe=[s.a,p.a,qe];var $e=i.compose.apply(void 0,[i.applyMiddleware.apply(void 0,Qe)].concat([])),Xe=Object(i.createStore)(Ze,{},$e);qe.run(xe),qe.run(fe),qe.run(_e);var en,nn=Xe,tn=t(15),rn=t(16),an=t(18),cn=t(17),on=t(27),un=t.n(on),sn=function(){},ln=(t(42),j.WALL),pn=j.SNAKE_BODY,fn=j.SNAKE_DEAD,dn=j.SNAKE_HEAD,bn=j.SNAKE_NECK,mn=j.SNAKE_TAIL,vn=j.APPLE,yn=(en={},Object(He.a)(en,fn,"d"),Object(He.a)(en,dn,"s"),Object(He.a)(en,bn,"n"),Object(He.a)(en,pn,"e"),Object(He.a)(en,mn,"k"),Object(He.a)(en,vn,"a"),en),hn=function(e){return e===ln?"wall":"empty"},En=function(e,n){var t=e.tile;return c.a.createElement("div",{className:"col ".concat(hn(t)),key:n},c.a.createElement("div",{className:"tile"},function(e){return yn[e]}(t)))},xn=function(e,n){return c.a.createElement("div",{className:"row",key:n},e.map(En))},On=function(e){var n=e.board,t=e.alive;return c.a.createElement("div",{className:"board"},U(n,t).map(xn))},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3/60,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return function(t){var r=function(r){Object(an.a)(o,r);var a=Object(cn.a)(o);function o(){return Object(tn.a)(this,o),a.apply(this,arguments)}return Object(rn.a)(o,[{key:"componentDidMount",value:function(){var t=this,r=this.props,a=r.userUpdate,c=r.userBegin||sn,o=un.a.setMaxAllowedFPS(n).setSimulationTimestep(e).setBegin(c).setUpdate((function(e){return a(e)})).setDraw((function(){return t.forceUpdate()})).setEnd((function(e,n){n&&o.resetFrameDelta()}));this.setState({loop:o}),this.props.run&&o.start()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.run?this.state.loop.start():this.state.loop.stop()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.state.loop.stop()}},{key:"render",value:function(){return c.a.createElement(t,this.props)}}]),o}(c.a.Component);return r.defaultProps={run:!0},r}}(1e3/60,60),kn=Object(u.b)(null,(function(e){return Object(i.bindActionCreators)({userUpdate:h},e)}))(gn(On)),jn=function(e){Object(an.a)(t,e);var n=Object(cn.a)(t);function t(){return Object(tn.a)(this,t),n.apply(this,arguments)}return Object(rn.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keypress",this.props.changePlayerDirection),document.addEventListener("keypress",this.props.startGameIfPossible)}},{key:"componentDidUnMount",value:function(){document.removeEventListener("keypress",this.props.changePlayerDirection),document.removeEventListener("keypress",this.props.startGameIfPossible)}},{key:"render",value:function(){var e=this.props,n=e.board,t=e.alive,r=e.running,a=e.applesEaten;return c.a.createElement("div",null,c.a.createElement(kn,{board:n,alive:t,run:r}),c.a.createElement("p",null,r?null:"Press any key (W, S, A, D) to start game"),c.a.createElement("p",null,"Score: ",a),t?null:c.a.createElement("p",null,"Dead!"))}}]),t}(a.Component),wn=Object(u.b)((function(e){return{alive:e.game.alive,running:e.game.running,applesEaten:e.board.applesEaten,board:e.board}}),(function(e){return Object(i.bindActionCreators)({changePlayerDirection:Fe,startGameIfPossible:v},e)}))(jn),Sn=(t(43),function(){return c.a.createElement("a",{href:"https://github.com/seanmailander/react-danger-noodle",className:"github-corner","aria-label":"View source on Github"},c.a.createElement("svg",{width:"80",height:"80",viewBox:"0 0 250 250",style:{fill:"#30228F",color:"#665BB2",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true"},c.a.createElement("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),c.a.createElement("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),c.a.createElement("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"})))}),An=(t(44),function(){return c.a.createElement("div",{className:"app"},c.a.createElement("header",null,"Danger Noodle",c.a.createElement(Sn,null)),c.a.createElement("main",null,c.a.createElement(wn,null)))}),Dn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Nn(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ln=document.querySelector("#root");Object(o.render)(c.a.createElement(u.a,{store:nn},c.a.createElement(An,null)),Ln),function(){if("serviceWorker"in navigator){if(new URL("/react-danger-noodle",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/react-danger-noodle","/service-worker.js");Dn?(!function(e){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Nn(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Nn(e)}))}}()}},[[29,1,2]]]);
//# sourceMappingURL=main.c8f590aa.chunk.js.map